<?php

/** @var \News\Manger\Block\User\News\View $block */
$news = $block->getNews();
$newsInfo = $block->getDetailedNewsInfo();
$sharingLinks = $block->getSharingLinks();
$finalCategories = $block->getUniqueFinalCategoryWithPaths();
?>
<?php if ($news): ?>
  <div class="news-view-container">

    <h1 class="news-view-title"><?= $block->escapeHtml($newsInfo['title']) ?></h1>


    <div class="news-view-meta">
      <div class="meta-item">
        <i class="icon-calendar"></i>
        <span><?= $block->escapeHtml(__('Published on: %1', $block->formatArabicDate($newsInfo['created_at']))) ?></span>
      </div>
      <?php if ($newsInfo['author_name']): ?>
        <div class="meta-item">
          <i class="icon-user"></i>
          <span><?= $block->escapeHtml(__('Author: %1', $newsInfo['author_name'])) ?></span>
        </div>
      <?php endif; ?>
      <div class="meta-item">
        <i class="icon-eye"></i>
        <span><?= $block->escapeHtml(__('Views: %1', number_format($newsInfo['view_count']))) ?></span>
      </div>
      <?php if ($newsInfo['is_featured']): ?>
        <div class="meta-item featured-badge">
          <i class="icon-star"></i>
          <span><?= $block->escapeHtml(__('Featured')) ?></span>
        </div>
      <?php endif; ?>
    </div>

    <?php if (!empty($finalCategories)): ?>
      <div class="category-dropdown-container">
        <?php foreach ($finalCategories as $categoryIndex => $finalCategory): ?>
          <?php if (!empty($finalCategory['paths'])): ?>
            <?php
            $mainPath = $finalCategory['paths'][0];
            $mainCategory = $mainPath[count($mainPath) - 1];
            $reversedPath = array_reverse($mainPath);
            ?>

            <div class="category-dropdown-wrapper">
              <div class="category-dropdown-btn" onclick="toggleCategoryDropdown(<?= $categoryIndex ?>)">
                <span class="category-name"><?= $block->escapeHtml($mainCategory['name']) ?></span>
                <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8">
                  <path d="M1 1l5 5 5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>

              <div class="category-dropdown-menu" id="categoryDropdown<?= $categoryIndex ?>">
                <div class="dropdown-header">
                  <h4><?= $block->escapeHtml(__('Category Path')) ?></h4>
                </div>

                <div class="dropdown-content">
                  <?php foreach ($reversedPath as $pathIndex => $pathCategory): ?>
                    <a href="<?= $block->escapeUrl($block->getUrl('newsuser/category/view', ['id' => $pathCategory['id'] ?? null])) ?>"
                      class="dropdown-item <?= ($pathIndex === 0) ? 'current-category' : 'parent-category' ?>">
                      <div class="item-content">
                        <span class="category-title"><?= $block->escapeHtml($pathCategory['name']) ?></span>

                      </div>
                      <?php if (isset($pathCategory['description']) && $pathCategory['description']): ?>
                        <span class="category-description"><?= $block->escapeHtml($pathCategory['description']) ?></span>
                      <?php endif; ?>
                    </a>
                  <?php endforeach; ?>
                </div>

                <?php if (count($finalCategory['paths']) > 1): ?>
                  <?php foreach ($finalCategory['paths'] as $altPathIndex => $altPath): ?>
                    <?php if ($altPathIndex > 0): ?>
                      <?php
                      $reversedAltPath = array_reverse($altPath);
                      ?>
                      <div class="alternative-path-wrapper" style="margin-top: 20px; border-top: 1px solid #dee2e6; padding-top: 10px;">
                        <div class="dropdown-header" style="padding-left:0;">
                          <h4><?= $block->escapeHtml(__('Alternative Path') . ' ' . ($altPathIndex + 1)) ?></h4>
                        </div>
                        <div class="dropdown-content">
                          <?php foreach ($reversedAltPath as $pathIndex => $pathCategory): ?>
                            <a href="<?= $block->escapeUrl($block->getUrl('newsuser/category/view', ['id' => $pathCategory['id'] ?? null])) ?>"
                              class="dropdown-item <?= ($pathIndex === 0) ? 'current-category' : 'parent-category' ?>">
                              <div class="item-content">
                                <span class="category-title"><?= $block->escapeHtml($pathCategory['name']) ?></span>

                              </div>
                              <?php if (isset($pathCategory['description']) && $pathCategory['description']): ?>
                                <span class="category-description"><?= $block->escapeHtml($pathCategory['description']) ?></span>
                              <?php endif; ?>
                            </a>
                          <?php endforeach; ?>
                        </div>
                      </div>
                    <?php endif; ?>
                  <?php endforeach; ?>
                <?php endif; ?>
              </div>
            </div>

          <?php endif; ?>
        <?php endforeach; ?>
      </div>


      <script>
        function toggleCategoryDropdown(index) {
          const dropdown = document.getElementById('categoryDropdown' + index);
          const btn = dropdown.previousElementSibling;
          const arrow = btn.querySelector('.dropdown-arrow');


          document.querySelectorAll('.category-dropdown-menu.show').forEach(menu => {
            if (menu.id !== 'categoryDropdown' + index) {
              menu.classList.remove('show');
              const otherBtn = menu.previousElementSibling;
              const otherArrow = otherBtn.querySelector('.dropdown-arrow');
              otherBtn.classList.remove('active');
              otherArrow.style.transform = 'rotate(0deg)';
            }
          });


          dropdown.classList.toggle('show');
          btn.classList.toggle('active');


        }

        document.addEventListener('click', function(event) {
          if (!event.target.closest('.category-dropdown-wrapper')) {
            document.querySelectorAll('.category-dropdown-menu.show').forEach(menu => {
              menu.classList.remove('show');
              const btn = menu.previousElementSibling;
              const arrow = btn.querySelector('.dropdown-arrow');
              btn.classList.remove('active');
              arrow.style.transform = 'rotate(0deg)';
            });
          }
        });
      </script>

    <?php else: ?>
      <div class="news-view-categories">
        <p><?= $block->escapeHtml(__('No Categories Assigned')) ?></p>
      </div>
    <?php endif; ?>





    <?php if ($newsInfo['excerpt']): ?>
      <div class="news-excerpt">
        <h4><?= $block->escapeHtml(__('Summary')) ?></h4>
        <p><?= $block->escapeHtml($newsInfo['excerpt']) ?></p>
      </div>
    <?php endif; ?>


    <div class="news-view-content">
      <?= $newsInfo['content'] ?>
    </div>


    <div class="additional-info">
      <div class="info-section">
        <h4><?= $block->escapeHtml(__('News Details')) ?></h4>
        <table class="info-table">
          <tr>
            <td><?= $block->escapeHtml(__('News ID')) ?></td>
            <td>#<?= $block->escapeHtml($newsInfo['id']) ?></td>
          </tr>
          <tr>
            <td><?= $block->escapeHtml(__('Status')) ?></td>
            <td>
              <span class="status-badge <?= $newsInfo['status'] ? 'active' : 'inactive' ?>">
                <?= $newsInfo['status'] ? __('Active') : __('Draft') ?>
              </span>
            </td>
          </tr>
          <?php if ($newsInfo['publish_date'] != $newsInfo['created_at']): ?>
            <tr>
              <td><?= $block->escapeHtml(__('Publish Date')) ?></td>
              <td><?= $block->escapeHtml($block->formatArabicDate($newsInfo['publish_date'])) ?></td>
            </tr>
          <?php endif; ?>
          <?php if ($newsInfo['updated_at'] != $newsInfo['created_at']): ?>
            <tr>
              <td><?= $block->escapeHtml(__('Last Updated')) ?></td>
              <td><?= $block->escapeHtml($block->formatArabicDate($newsInfo['updated_at'])) ?></td>
            </tr>
          <?php endif; ?>
          <?php if ($newsInfo['slug']): ?>
            <tr>
              <td><?= $block->escapeHtml(__('URL Slug')) ?></td>
              <td><?= $block->escapeHtml($newsInfo['slug']) ?></td>
            </tr>
          <?php endif; ?>
        </table>
      </div>


      <?php if ($newsInfo['meta_description'] || $newsInfo['meta_keywords']): ?>
        <div class="info-section">
          <h4><?= $block->escapeHtml(__('SEO Information')) ?></h4>
          <?php if ($newsInfo['meta_description']): ?>
            <div class="meta-field">
              <strong><?= $block->escapeHtml(__('Meta Description:')) ?></strong>
              <p><?= $block->escapeHtml($newsInfo['meta_description']) ?></p>
            </div>
          <?php endif; ?>
          <?php if ($newsInfo['meta_keywords']): ?>
            <div class="meta-field">
              <strong><?= $block->escapeHtml(__('Meta Keywords:')) ?></strong>
              <p><?= $block->escapeHtml($newsInfo['meta_keywords']) ?></p>
            </div>
          <?php endif; ?>
        </div>
      <?php endif; ?>
    </div>


    <div class="sharing-section">
      <h4><?= $block->escapeHtml(__('Share this news')) ?></h4>
      <div class="sharing-buttons">
        <a href="<?= $sharingLinks['facebook'] ?>" target="_blank" class="share-btn facebook">
          <i class="fab fa-facebook-f"></i> Facebook
        </a>
        <a href="<?= $sharingLinks['twitter'] ?>" target="_blank" class="share-btn twitter">
          <i class="fab fa-twitter"></i> Twitter
        </a>
        <a href="<?= $sharingLinks['linkedin'] ?>" target="_blank" class="share-btn linkedin">
          <i class="fab fa-linkedin-in"></i> LinkedIn
        </a>
        <a href="<?= $sharingLinks['whatsapp'] ?>" target="_blank" class="share-btn whatsapp">
          <i class="fab fa-whatsapp"></i> WhatsApp
        </a>
        <a href="<?= $sharingLinks['telegram'] ?>" target="_blank" class="share-btn telegram">
          <i class="fab fa-telegram-plane"></i> Telegram
        </a>
      </div>
    </div>


    <?php $relatedNews = $block->getRelatedNews(4); ?>
    <?php if (!empty($relatedNews)): ?>
      <div class="related-news-section">
        <h3><?= $block->escapeHtml(__('Related News')) ?></h3>
        <div class="related-news-grid">
          <?php foreach ($relatedNews as $related): ?>
            <div class="related-news-item">
              <?php if ($related['featured_image']): ?>
                <img src="<?= $block->escapeUrl($related['featured_image']) ?>"
                  alt="<?= $block->escapeHtml($related['news_title']) ?>"
                  class="related-news-image">
              <?php endif; ?>
              <div class="related-news-content">
                <h5>
                  <a href="<?= $block->getUrl('newsuser/user/view', ['id' => $related['id']]) ?>">
                    <?= $block->escapeHtml($related['news_title']) ?>
                  </a>
                </h5>
                <?php if ($related['excerpt']): ?>
                  <p><?= $block->escapeHtml(substr($related['excerpt'], 0, 100)) ?>...</p>
                <?php endif; ?>
                <span class="related-date"><?= $block->formatArabicDate($related['created_at']) ?></span>
              </div>
            </div>
          <?php endforeach; ?>
        </div>
      </div>
    <?php endif; ?>


    <div class="back-link-container">
      <a href="<?= $block->escapeUrl($block->getUrl('newsuser/user')) ?>" class="back-link">
        ← <?= $block->escapeHtml(__('Back to News List')) ?>
      </a>
    </div>
  </div>


  <style>
    .news-view-container {
      max-width: 1000px;
      margin: 20px auto;
      padding: 30px;
      background: #fff;
      border: 1px solid #e5e5e5;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }


    .news-view-title {
      font-size: 2.8rem;
      margin-bottom: 25px;
      color: #2c3e50;
      line-height: 1.3;
      text-align: center;
      font-weight: 700;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }


    .news-view-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 10px;
      border-left: 4px solid #3498db;
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
      color: #495057;
      font-weight: 500;
    }

    .meta-item i {
      color: #3498db;
      font-size: 1.1rem;
    }

    .featured-badge {
      background: linear-gradient(45deg, #f39c12, #e67e22);
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-weight: 600;
      box-shadow: 0 2px 8px rgba(243, 156, 18, 0.3);
    }


    .category-dropdown-container {
      margin-bottom: 30px;
      padding: 20px;
      /* background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); */
      border-radius: 12px;
      /* box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); */
    }

    .category-dropdown-wrapper {
      position: relative;
      margin-bottom: 15px;
    }

    .category-dropdown-wrapper:last-child {
      margin-bottom: 0;
    }


    .category-dropdown-btn {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      /* background: linear-gradient(135deg, #ffffff, #f8f9fa); */
      border: 2px solid #dee2e6;
      border-radius: 8px;
      padding: 12px 20px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      color: #495057;
      transition: all 0.3s ease;
      /* box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); */
      user-select: none;
    }

    .category-dropdown-btn:hover {
      /* background: linear-gradient(135deg, #f8f9fa, #e9ecef); */
      border-color: #3498db;
      /* box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2); */
      transform: translateY(-1px);
    }

    .category-dropdown-btn.active {
      /* background: linear-gradient(135deg, #3498db, #2980b9); */
      color: white;
      border-color: #2980b9;
      /* box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3); */
    }

    .category-name {
      flex: 1;
      font-weight: 600;
    }

    .dropdown-arrow {
      transition: transform 0.3s ease;
      opacity: 0.7;
    }

    .category-dropdown-btn.active .dropdown-arrow {
      opacity: 1;
    }


    .category-dropdown-menu {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #dee2e6;
      border-radius: 12px;
      /* box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15); */
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 1000;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .category-dropdown-menu.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    /* رأس القائمة */
    .dropdown-header {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      padding: 15px 20px;
      border-bottom: 1px solid #dee2e6;
    }

    .dropdown-header h4 {
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      color: #6c757d;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }


    .dropdown-content {
      padding: 8px 0;
    }

    .dropdown-item {
      display: block;
      padding: 12px 20px;
      text-decoration: none;
      color: #495057;
      transition: all 0.2s ease;
      border: none;
      background: none;
      cursor: pointer;
    }



    .item-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    .category-title {
      font-weight: 600;
      font-size: 1rem;
    }

    .path-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: #795548;
    }


    .current-badge {
      background: linear-gradient(135deg, #4caf50, #388e3c);
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }

    .level-badge {
      background: linear-gradient(135deg, #9c27b0, #7b1fa2);
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }

    /* الوصف */
    .category-description {
      font-size: 0.85rem;
      color: #6c757d;
      line-height: 1.4;
      margin-top: 4px;
      display: block;
    }

    /* رسالة عدم وجود تصنيفات */
    .news-view-categories {
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, #fff8e1, #ffecb3);
      border-radius: 12px;
      border: 1px dashed #ffa000;
      text-align: center;
    }

    .news-view-categories p {
      color: #e65100;
      font-style: italic;
      margin: 0;
      font-weight: 500;
    }

    /* استجابة للشاشات الصغيرة */
    @media (max-width: 768px) {
      .category-dropdown-container {
        margin: 10px 0 20px 0;
        padding: 15px;
      }

      .category-dropdown-menu {
        left: -10px;
        right: -10px;
        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2);
      }

      .dropdown-item {
        padding: 15px;
      }

      .item-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }

      .current-badge,
      .level-badge {
        align-self: flex-end;
      }
    }

    /* الصورة المميزة */
    .featured-image-container {
      text-align: center;
      margin: 30px 0;
    }

    .featured-image {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      transition: transform 0.3s ease;
    }

    .featured-image:hover {
      transform: scale(1.02);
    }

    /* المقتطف */
    .news-excerpt {
      background: linear-gradient(135deg, #e8f6f3, #d5f4e6);
      padding: 25px;
      border-radius: 12px;
      margin: 30px 0;
      border-left: 5px solid #16a085;
      box-shadow: 0 3px 15px rgba(22, 160, 133, 0.1);
    }

    .news-excerpt h4 {
      color: #16a085;
      margin-bottom: 15px;
      font-size: 1.3rem;
      font-weight: 600;
    }

    /* محتوى الخبر */
    .news-view-content {
      margin: 40px 0;
      line-height: 1.8;
      font-size: 1.15rem;
      color: #2c3e50;
      text-align: justify;
    }

    .additional-info {
      margin: 40px 0;
    }

    .info-section {
      background: linear-gradient(135deg, #fdfdfd, #f8f9fa);
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 25px;
      border: 1px solid #e9ecef;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .info-section h4 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 1.4rem;
      font-weight: 600;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
    }

    .info-table {
      width: 100%;
      border-collapse: collapse;
    }

    .info-table td {
      padding: 12px 15px;
      border-bottom: 1px solid #e9ecef;
      vertical-align: middle;
    }

    .info-table td:first-child {
      font-weight: 600;
      color: #34495e;
      width: 35%;
      background: rgba(52, 152, 219, 0.05);
    }

    .status-badge {
      padding: 6px 15px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-badge.active {
      background: linear-gradient(135deg, #d4edda, #c3e6cb);
      color: #155724;
      box-shadow: 0 2px 5px rgba(21, 87, 36, 0.2);
    }

    .status-badge.inactive {
      background: linear-gradient(135deg, #f8d7da, #f5c6cb);
      color: #721c24;
      box-shadow: 0 2px 5px rgba(114, 28, 36, 0.2);
    }

    /* معلومات SEO */
    .meta-field {
      margin-bottom: 20px;
    }

    .meta-field strong {
      color: #2c3e50;
      display: block;
      margin-bottom: 8px;
      font-size: 1.1rem;
    }

    .meta-field p {
      color: #555;
      line-height: 1.6;
      background: rgba(52, 152, 219, 0.05);
      padding: 12px 15px;
      border-radius: 8px;
      border-left: 3px solid #3498db;
    }

    /* قسم المشاركة */
    .sharing-section {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      margin: 35px 0;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
    }

    .sharing-section h4 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 1.5rem;
      font-weight: 600;
    }

    .sharing-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 20px;
    }

    .share-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      border-radius: 30px;
      text-decoration: none;
      color: white;
      font-weight: 600;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    }

    .share-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .share-btn.facebook {
      background: linear-gradient(135deg, #3b5998, #4c70ba);
    }

    .share-btn.twitter {
      background: linear-gradient(135deg, #1da1f2, #0d8bd9);
    }

    .share-btn.linkedin {
      background: linear-gradient(135deg, #0077b5, #005885);
    }

    .share-btn.whatsapp {
      background: linear-gradient(135deg, #25d366, #128c7e);
    }

    .share-btn.telegram {
      background: linear-gradient(135deg, #0088cc, #006bb3);
    }

    /* الأخبار ذات الصلة */
    .related-news-section {
      margin-top: 50px;
      padding-top: 40px;
      border-top: 3px solid #e9ecef;
    }

    .related-news-section h3 {
      color: #2c3e50;
      font-size: 2rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 30px;
    }

    .related-news-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .related-news-item {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      border: 1px solid #f1f3f4;
    }

    .related-news-item:hover {
      transform: translateY(-8px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    }

    .related-news-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .related-news-item:hover .related-news-image {
      transform: scale(1.05);
    }

    .related-news-content {
      padding: 20px;
    }

    .related-news-content h5 {
      font-size: 1.2rem;
      margin-bottom: 12px;
      color: #2c3e50;
      line-height: 1.4;
    }

    .related-news-content h5 a {
      color: #2980b9;
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .related-news-content h5 a:hover {
      color: #3498db;
      text-decoration: underline;
    }

    .related-news-content p {
      font-size: 0.95rem;
      color: #7f8c8d;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .related-date {
      font-size: 0.85rem;
      color: #95a5a6;
      font-weight: 500;
    }

    /* رابط العودة */
    .back-link-container {
      text-align: center;
      margin-top: 50px;
    }

    .back-link {
      display: inline-block;
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: white;
      padding: 15px 30px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
    }

    .back-link:hover {
      background: linear-gradient(135deg, #2980b9, #1f618d);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
    }

    /* استجابة للشاشات الصغيرة */
    @media (max-width: 768px) {
      .news-view-container {
        margin: 10px;
        padding: 20px;
      }

      .news-view-title {
        font-size: 2.2rem;
      }

      .news-view-meta {
        flex-direction: column;
        gap: 15px;
      }

      .breadcrumb-path {
        flex-direction: column;
        gap: 15px;
        align-items: stretch;
      }

      .breadcrumb-item {
        justify-content: center;
      }

      .breadcrumb-arrow {
        transform: rotate(90deg);
        margin: 5px 0;
      }

      .dropdown-alternative-paths {
        position: relative;
        opacity: 1;
        visibility: visible;
        margin-top: 15px;
        box-shadow: none;
        border: 1px solid #e9ecef;
        background: #f8f9fa;
      }

      .sharing-buttons {
        flex-direction: column;
        align-items: center;
      }

      .share-btn {
        width: 200px;
        justify-content: center;
      }

      .related-news-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
    }

    @media (max-width: 480px) {
      .news-view-title {
        font-size: 1.8rem;
      }

      .active-category .category-link,
      .parent-category .category-link {
        font-size: 0.9rem;
        padding: 10px 15px;
      }

      .info-table td {
        display: block;
        width: 100%;
        border-bottom: none;
        padding: 8px 0;
      }

      .info-table td:first-child {
        background: none;
        font-weight: bold;
        border-bottom: 1px solid #e9ecef;
        margin-bottom: 5px;
      }
    }
  </style>

<?php else: ?>
  <div class="news-not-found">
    <h2><?= $block->escapeHtml(__('News Not Found')) ?></h2>
    <p><?= $block->escapeHtml(__('Sorry, the news article you are looking for could not be found.')) ?></p>
    <a href="<?= $block->escapeUrl($block->getUrl('newsuser/user')) ?>" class="back-link">
      ← <?= $block->escapeHtml(__('Back to News List')) ?>
    </a>
  </div>

  <style>
    .news-not-found {
      max-width: 700px;
      margin: 50px auto padding: 50px;
      background: linear-gradient(135deg, #fff, #f8f9fa);
      border: 1px solid #e5e5e5;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      text-align: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .news-not-found h2 {
      color: #e74c3c;
      font-size: 2.5rem;
      margin-bottom: 20px;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .news-not-found p {
      color: #7f8c8d;
      font-size: 1.2rem;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .news-not-found .back-link {
      display: inline-block;
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: white;
      padding: 15px 30px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
    }

    .news-not-found .back-link:hover {
      background: linear-gradient(135deg, #2980b9, #1f618d);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
    }

    @media (max-width: 768px) {
      .news-not-found {
        margin: 20px;
        padding: 30px;
      }

      .news-not-found h2 {
        font-size: 2rem;
      }

      .news-not-found p {
        font-size: 1rem;
      }
    }
  </style>
<?php endif; ?>
